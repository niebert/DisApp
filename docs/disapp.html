

<!DOCTYPE html>
<html manifest="disapp.appcache">
   <!-- html -->
   <head>
      <meta charset="iso-8859-1">
      <title>Submit Data</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <link href="css/jquery.mobile-1.2.0.min.css" rel="stylesheet" />
      <link href="css/ios_inspired.css" rel="stylesheet" />
      <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
      <script type="text/javascript" src="js/login.js"></script>
      <script type="text/javascript" src="js/fullscreen.js"></script>
      <script type="text/javascript" src="js/fuzzycontrol.js"></script>
      <script type="text/javascript" src="js/fuzzymain.js"></script>
      <script type="text/javascript" src="js/fuzzylayer.js"></script>
      <script type="text/javascript" src="js/jsondb.js"></script>
      <script type="text/javascript" src="js/geolocation.js"></script>
      <script type="text/javascript" src="js/htmlrequest.js"></script>
      <script type="text/javascript" src="js/localstorage.js"></script>
      <script type="text/javascript" src="js/mathcode.js"></script>
      <script type="text/javascript" src="js/navigate.js"></script>
      <script type="text/javascript" src="js/openwin.js"></script>
      <script type="text/javascript" src="js/settings.js"></script>
      <script type="text/javascript" src="js/showhide.js"></script>
      <script type="text/javascript" src="js/string.js"></script>
      <script type="text/javascript" src="js/syncserver.js"></script>
      <script type="text/javascript" src="js/urlgen.js"></script>
      <script type="text/javascript" src="js/writedom.js"></script>
      <!-- Database JSON File -->
      <script type="text/javascript" src="db/dbdisapp.js"></script>
      <script type="text/javascript" src="db/dbresponse.js"></script>
      <script type="text/javascript" src="db/dbfeedback.js"></script>
      <script>
         // all dialog buttons should close their parent dialog
         $(".ui-dialog button").live("click", function() {
         	$("[data-role='dialog']").dialog("close");
         });
         $(document).on("mobileinit", function(){
           $.mobile.defaultPageTransition = "slide";
         });
         var vDebug = 0;
      </script>
      <script src="js/jquery.mobile-1.2.0.min.js"></script>
      <link href="css/ios_post.css" rel="stylesheet" />
   </head>
   <body>

    <!--
    =============================================
             WELCOME SCREEN
    =============================================
     -->

    <div data-role="page" id="pWelcome">
        <div data-role="header" data-position="fixed">
           <a href="javascript:window.close()" data-theme="c">Quit</a>
           <h1>Welcome</h1>
           <a href="#pHome" data-theme="a">Home</a>
      </div>
        <!-- /header -->
         <div data-role="content"><h1>Welcome to DisApp</h1>
         <table bgcolor="white" cellspacing="10px">
           <tr>
             <td>
               &nbsp;
             </td>
             <td>
             <b>Disapp</b> will give you an idea of the risk of catching dengue while at home,
              based on your answers to the 5 questions you will be asked at the beginning.
              <b>Disapp</b> will also give you some practical suggestions of
              how to bring down your risk for catching dengue while you are at home.
              Finally, please fill out the feedback form at the end so we can make
              <b>Disapp</b> even better for everyone! Thank you for using <b>Disapp</b>!
            </td>
            <td>
              &nbsp;
            </td>
          </tr>
        </table>
        <table width="95%" cellspacing="10px">
          <tr>
            <td>
                <b>Online:</b>
            </td>
            <td>
                <div id="tdOnlineMode">
                ???
                </div>
              </td>
            <td>
              <select name="sOnlineMode" id="sOnlineMode" data-role="X_slider" onchange="selectOnlineMode(this.value)">
                <option value="-"></option>
                <option value="no">set Offline</option>
                <option value="yes">set Online</option>
              </select>
              <!-- button onclick="checkOnlineMode()" >Check</button -->
            </td>
          </tr>
          <tr>
            <td  colspan="2">
              <button onclick="$.mobile.changePage( '#pDisclaimer', { transition: 'slideup', changeHash: false })"> Disclaimer </button>
            </td>
            <td>
              <button onclick="checkDisclaimer4Submit()">Questionnaire</button>
            </td>
          </tr>
            <!--
            <tr>
              <td  colspan="2">
                Switch Online Mode:
              </td>
              <td id="tdOnlineMode">
                <select name="sOnlineMode" id="sOnlineMode" data-role="X_slider" onchange="selectOnlineMode(this.value)">
                  <option value="no">set NO</option>
                  <option value="yes">set YES</option>
                </select>
              </td>
            </tr>
       -->
        </table>
      </div>
    </div>
    <!--
    =============================================
           OFFLINE DATA
    =============================================
     -->
   <div data-role="page" id="pLocalStorageDB">
      <div data-role="header" data-position="fixed">
        <a href="javascript:window.close()" data-theme="c">Quit</a>
          <h1>Local Storage </h1>
         <a href="#pHome" data-theme="a">Home</a>
      </div>
      <!-- /header -->
      <div data-role="content">
        <h1>Offline Data:</h1>

     </div>

     <!--
     =============================================
            DISCLAIMER
     =============================================
      -->
    </div>
       <div data-role="page" id="pDisclaimer">
         <div data-role="header" data-position="fixed">
            <a href="#pWelcome" data-theme="a">Back</a>
            <h1>Disclaimer</h1>
            <a href="#pHome" data-theme="a">Home</a>
         </div>
         <!-- /header -->
         <div data-role="content">
           <h3>Disclaimer and Terms of Use:</h3>
           <table bgcolor="white" cellspacing="10px">
             <tr>
               <td>
                 &nbsp;
               </td>
               <td>
                 <b>Disapp</b> is purely meant as a free educational tool
                 to teach users about dengue risk and how to reduce it.
                 It is not meant to diagnose dengue infection or
                 to be a substitute for qualified medical advice.
                 No guarantee is made as to the accuracy of the provided risk estimate
                 and the developers are not liable in any way for any issues that may arise
                 from your use of <b>Disapp</b>. The collected data will be submitted
                 to the following server.
                 <table width="100%">
                   <tr>
                     <td>
                       <b>Server:</b>
                    </td>
                    <td>
                      <div id="disclaimer_submiturl" style="display:none"></div>
                      <input type='text' id='save_submiturl' name="save_submiturl" value='---' readonly="readonly">
                    </td>
                 </tr>
                 <tr>
                   <td>
                     <b>Database:</b>
                  </td>
                  <td>
                    <div id="disclaimer_database" style="display:none"></div>
                    <input type='text' id='save_database' name="save_database"  value='---' readonly="readonly">
                 </td>
               </tr>
               <tr>
                 <td>
                   <b>Connect Status:</b>
                </td>
                <td>
                  <div id="OffOnlineTag"> ??? </div>
               </td>
             </tr>
              </table>

              </td>
              <td>
                &nbsp;
              </td>
            </tr>
          </table>
          <!-- ============= SLIDER ACCEPT TERMS OF USER ================ -->
            <div data-role="fieldcontain">
              <table cellspacing="10px">
                <tr>
                  <td>
                    <label for="slider">I accept the above disclaimer and terms of use:</label>
                  </td>
                  <td>
                    <select name="sDisclaimer" id="sDisclaimer" data-role="slider" onchange="saveLocalVar(this.id,this.value)">
                       <option value="no">NO</option>
                       <option value="yes">YES</option>
                    </select>
                  </td>
                </tr>
              </table>
              <button onclick="checkDisclaimer4Submit()"> Submit Data </button>
            </div>
          </div>
      </div>

      <!--
      =============================================
               RESPONSE
      =============================================
       -->

       <div data-role="page" id="pResponse">
          <div data-role="header" data-position="fixed">
            <a href="#pWelcome" data-theme="a">Back</a>
            <h1>Risk Response</h1>
          </div>
          <!-- /header -->
          <div data-role="content">
            <h1>Risk Response:</h1>
            <h3>Your calculated RISK is:</h3>
            <center>
              <h2 id="valDefuzzyRiskA" style="color:red">
                  high
              </h2>
           </center>
          <hr>
           <table bgcolor="white" cellspacing="10px">
             <tr>
               <td>
                 &nbsp;
               </td>
               <td>
                 <b>Disapp</b> has calculated your risk about dengue risk and how to reduce it.
                 It is not meant to diagnose dengue infection or
                 to be a substitute for qualified medical advice.
                 No guarantee is made as to the accuracy of the provided risk estimate
                 and the developers are not liable in any way for any issues that may arise
                 from your use of <b>Disapp</b>.
            	  </td>
                <td>
                 &nbsp;
               </td>
              </tr>
            </table>
            <button id="bResponseOptions" onclick="gotoPageJQ('ResponseOptions')">Response Options</button>
          </div>
        </div>
        <!--
        =============================================
                 RESPONSE OPTIONS
        =============================================
         -->

       <div data-role="page" id="pResponseOptions">
          <div data-role="header" data-position="fixed">
             <a href="#pResponse" data-theme="a">Back</a>
             <h1>Response Options</h1>
          </div>
          <!-- /header -->
         <div data-role="content">
               <script  type="text/javascript">
                 printAllResponses();
              </script>
              <br />
              <label id="response_errormsg" style="color:red"></label>
         </div>
     </div>
      <!--
     =============================================
              RISK MITIGATION
     =============================================
      -->

    <div data-role="page" id="pRiskMitigation">
       <div data-role="header" data-position="fixed">
          <a href="#pResponseOptions" data-theme="a">Back</a>
          <h1>Risk Mitigation</h1>
          <a href="#pHome" data-theme="a">Home</a>

       </div>
       <!-- /header -->
      <div data-role="content">
        <h1>Risk Mitigation Response:</h1>
        <h3>Your calculated risk <u>including</u> Risk Mitigation is:</h3>
        <center>  <!-- RISK WITH MITIGATION -->
          <h2>
            <div id="valDefuzResponse_X" style="color:red">
             Medium?
           </div>
          </h2>
       </center>
       <h3>Your calculated risk <u>without Risk Mitigation</u> is:</h3>
       <center> <!-- RISK WITHOUT MITIGATION -->
         <h2>
           <div id="valDefuzzyRiskB" style="color:red">
             High?
          </div>
         </h2>
      </center>
       <table bgcolor="white" cellspacing="10px" width="95%">
          <tr>
            <td>
             <button id="bFeedback" onclick="gotoPageJQ('Feedback')"> Provide Feedback </button>
           </td>
           <td>
            <button id="bHome" onclick="gotoPageJQ('Home')"> Home </button>
          </td>
         </tr>
        </table>

      </div>
   </div>
   <!--
   =============================================
            FEEDBACK for APP
   =============================================
    -->

   <div data-role="page" id="pFeedback">
     <div data-role="header" data-position="fixed">
        <a href="#pHome" data-theme="a">Home</a>
        <h1>Send Feedback</h1>
        <a href="javascript:window.close()" data-theme="c">Quit</a>
      </div>
     <!-- /header -->
    <div data-role="content">
      <ul data-role='listview' data-inset='true'>
         <script  type="text/javascript">
            printAllFeedback();
         </script>
      </ul>
      <br />
      <label id="feedback_errormsg" style="color:red"></label>
    </div>
   </div>

     <!--
     =============================================
              COLLECTED DATA
     =============================================
      -->
     <div data-role="page" id="pCollectedData">

     	<div data-role="header" data-position="fixed">
     		<h1>Database</h1>
     		<a href="#"  onclick="gotoPageJQ('Home');return false" data-theme="a">Home</a>
     	</div><!-- /header -->

     	<div data-role="content">

     		<ul id="ul-dbviewer" data-role="listview">
     			<li data-role="list-divider">Database Records</li>
     			<script>
     				if (typeof(vJSONDB) != undefined) {
     					//alert("JSONDB was defined!");
     					var vDB = vJSONDB["DBlines"];
     					var vCount = 0;
     					var vDBhash = {};
     					for (var i=0;i<vDB.length;i++) {
     						vCount = i+1;
     						vDBhash = convertArray2Hash(vDB[i]);
     						document.write(getItem4DisplayDB(i,vDBhash));
     						//document.write("<li><a href='#displaydbrecord' onclick=\"fillContentRecordDB("+i+");alert('Display Record "+vCount+"')\">"+vCount+" "+vDB[i][0]+"</a></li>");
     					};
     				} else {
     					alert("JSONDB was undefined!")
     				}
     			</script>
     			</ul>

     	</div>

     </div>

     <!--
     =============================================
              DISPLAY RECORD
     =============================================
      -->
     <div data-role="page" id="pDisplayRecord">

      <div data-role="header" data-position="fixed">
        <h1>Display Record</h1>
        <a href="#" onclick="gotoPageJQ('CollectedData');return false" data-theme="a">Collected Data</a>
      </div><!-- /header -->

      <div data-role="content">
        <script  type="text/javascript">
      	  createDisplayFormJSON();
      		fillContentRecordDB(0);
      	</script>


      </div>

     </div>
     <!--
     =============================================
              WAIT FOR SERVER
     =============================================
      -->
     <div data-role="page" id="pWait">

      <div data-role="header" data-position="fixed">
        <h1>Connect</h1>
        <a href="#" onclick="gotoPageJQ('Home');return false" data-theme="a">Home</a>
      </div><!-- /header -->

      <div data-role="content">
          <h1>Connect to Server:</h1>
          <h2>Try to submit data to server<br>Please wait ...</h2>
      </div>

     </div>
     <!--
     =============================================
              THANk YOU
     =============================================
      -->
     <div data-role="page" id="pThankYou">

      <div data-role="header" data-position="fixed">
        <h1>Connect</h1>
        <a href="#" onclick="gotoPageJQ('Home');return false" data-theme="a">Home</a>
      </div><!-- /header -->

      <div data-role="content">
          <h1>Thank You:</h1>
          <h2>Thank you very much for the submission of feefback.<br>
            Improvements of DisApp will be shared with you ...
          </h2>
      </div>

     </div>
     <!--
     =============================================
              Settings
     =============================================
      -->
     <div data-role="page" id="pDisplayRecord">

      <div data-role="header" data-position="fixed">
        <h1>Settings:</h1>
        <a href="#" onclick="gotoPageJQ('Home');return false" data-theme="a">Home</a>
        </div><!-- /header -->

      <div data-role="content">

        Database: <input type="text" name="database" id="settings_database" onchange="updateSetting('name',this.value)" value="undefined.db"/>
    		<br />
        Usergroup: <input type="text" name="usergroup" id="settings_usergroup" onchange="updateSetting('usergroup',this.value)" value="undefined usergroup"/>
    		<br />
        My e-Mail: <input type="text" name="usergroup" id="settings_email" onchange="updateSetting('email',this.value)" value="undefined e-mail"/>
    		<br />
    		<!-- DB Access View Password: <input type="settings_password" id="app_viewpwd" value="unknown"/> -->

    		<br />
    		Submit URL: <input type="text" id="settings_submiturl"  onchange="updateSetting('submiturl',this.value)" value="http://www.example.com/appdb.cgi"/>

      </div>

     </div>

     <!--
     =============================================
              ACKNOWLEDEGMENT
     =============================================
      -->

     <div data-role="page" id="pAcknowledgements" data-theme="b">

     	<div data-role="header" data-position="fixed">
     		<h1>Acknowledgements</h1>
     		<a href="#" data-rel="back">Back</a>
     	</div><!-- /header -->

     	<div data-role="content">
     		<ul>
          <li>
     				<b>iOS-Inspired jQuery Mobile theme</b> by <a href="http://twitter.com/taitems" target="_blank">@taitems</a>. Resources at <a href="https://github.com/taitems/iOS-Inspired-jQuery-Mobile-Theme" target="_blank">GitHub page</a>.
     			</li>
          <li>
     				<b>Ajit N. Babu</b> for Work flow development
     			</li>
          <li>
     				<b>Jitendra Shah</b> for Backend Development
     			</li>
          <li>
     				<b>Suray Shah</b> for Backend Development
     			</li>
          <li>
     				<b>Arnav Puri</b> for Backend/App Development, ODKJS API
     			</li>
          <li>
            <b>Chandana Unitthan</b> for Project Management Support
          </li>
          <li>
     				<b>Joerg Rapp</b> Spatial Analysis
     			</li>
     			<li>
     				<b>Biju Soman</b> for Public Health Support in Pilot Region
     			</li>
     			<li>
     				Joseph Wain for iOS style Icons  <a href="http://www.glyphish.com" target="_blank">glyphish.com</a>. Licensed under the <a href="http://creativecommons.org/licenses/by/3.0/us/" target="_blank">Creative Commons Attribution 3.0 United States License</a>.
     			</li>
     		</ul>

     	</div>

     </div>

     <!--
     =============================================
              HOME
     =============================================
      -->

    <div data-role="page" id="pHome">
       <div data-role="header" data-position="fixed">
          <a href="javascript:window.close()" data-theme="a">Close</a>
          <h1>Home - DisApp</h1>
       </div>
       <!-- /header -->
      <div data-role="content">

        <p>Welcome to the DisApp. Feel free to have a look around and report and bugs to the <a href="https://github.com/niebert/DisApp/issues" target="_blank">GitHub issues page</a>.</p>

    		<ul data-role="listview" data-inset="true">
    			<li style="display:none" id="MenuMaplocation"><a href="javascript:openWinHTML('map4location.html','wMapLocation')">Show Map Location</a></li>
    			<li><a href="#pSubmitData" onclick="gotoSubmitQuestionnaire()">Submit Observation</a></li>
    			<li><a href="#pCollectedData">My Collected Data</a></li>
          <li><a href="#pResponseOptions">Ways to Stop Dengue</a></li>
    			<li><a href="#pSendFeedback">Send DisApp Feedback</a></li>
    			<li><a href="#pSettings">Settings</a></li>
    			<li><a href="#pAcknowledgements">Acknowledgements</a></li>
    		</ul>
    		<p>Please use Firefox for App (<a href="https://www.mozilla.org" target="_blank">Firefox-Homepage</a>)</p>

    		<!-- p>Press key [F] to enter Fullscreen Mode</p -->

    		<br />
    		<button class="ui-btn-plain" onclick="window.location.href='#quitDialogApp'">Quit App</button>
    	<br />


      </div>
    </div>

     <!--
     =============================================
              SUBMIT DATA
     =============================================
      -->

     <div data-role="page" id="pSubmitData">
         <div data-role="header" data-position="fixed">
           <a href="#pWelcome" data-theme="a">Welcome</a>
           <h1>Submit Data</h1>
            <a href="#pHome" data-theme="a">Home</a>
         </div>
         <!-- /header -->
         <div data-role="content">
            <form name="send2appdb" id="send2appdb" action="http://www.example.com/cgi-bin/appdb/submitscript.php" >
               <input type='hidden' id='app_database' name='database' value=''>
               <input type='hidden' id='currentGeolocation' name='currentGeolocation' value=''>
               <input type='hidden' name='action' value='subscribeapp'>
               <input type='hidden' name='login' value=''>
               <input type='hidden' name='mailnotification' value=''>
               <input type='hidden' name='session' value=''>
               <input type='hidden' name='language' value=''>
               <input type='hidden' name='viewpwd' value=''>
               <input type='hidden' name='ided' value=''>
               <input type='hidden' name='idrecord' value=''>
               <script  type="text/javascript">
                  printHeader();
               </script>
               <ul data-role='listview' data-inset='true'>
                  <script  type="text/javascript">
                     printAllQuestions();
                  </script>
               </ul>
               <!-- input type="button" name=bOK value='   Save   ' -->
               <input type="button" name=bOK value='   Submit   ' onclick="processQuestionnaire()">
            </form>
            <br />
            <label id="app_errormsg" style="color:red"></label>
            <!--
            <iframe id="iLoader" src="./loader/empty.html" width="90%" height="100" name="iLoader"></iframe>
            -->
            <!-- button class="ui-btn-plain" onclick="window.close()"> Close </button -->
            <!--
            =============================================
                     MAIN MENU
            =============================================
             -->

         </div>
         <!-- /ui-body wrapper -->
      </div>
      <!-- /page -->
      <!--
      =============================================
               END OF PAGES
      =============================================
       -->
      <div id="divJSCALL"></div>
      <div id="iFrameContainer" style="display:none">
        <iframe id="iLoader" src="loader/setonline.html" width="90%" height="100" name="iLoader"></iframe>
      </div>
      <!--
      =============================================
               END OF CONTAINER
      =============================================
       -->
    <script type="text/javascript">
         var vDebug = 0;
         var vLoaderURL = "";
         var vQueryHash = readQueryParams();
         var vOnlineMode = false;
         var vJSONDB_Offline = {
         	DBlines: [],
         	DBsynced: [],
         	DBformat: []
         };
         handleLocalJSONDB(vQueryHash);
         handleOfflineJSONDB(vQueryHash);
         setFormLocation();
         initDisApp();
         var vKey = "sDisclaimer";
         write2value(vKey,loadLocalVar(vKey));
         var vFuzzyControl = new FuzzyControl();
         checkOnlineMode();
      </script>
   </body>
</html>
