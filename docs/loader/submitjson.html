<HTML>
<HEAD>
   <TITLE>Submit JSON Frame - App</TITLE>
     <meta http-equiv="Content-Type" content="text/html; charset=utf8">

<!--
#################################################
# App - Submit JSON Frame
# Javascript Software Package
# email: niehaus@uni-landau.de
# created               8.8.2014
# last modifications    8.8.2014
# Author:  Engelbert Niehaus
# GNU Public License
#################################################
-->
</HEAD>
<BODY bgcolor="#EEEEEE">
<!--- Empty Frame --->
<div id="output">
</div>

<script type="text/javascript">

function submitJSON(pURL)
{
    var s = document.createElement("script");
    s.type = "text/javascript";
    s.src = pURL;
    s.innerHTML = null;
    s.id = "map";
    document.getElementById("output").innerHTML = "";
    document.getElementById("output").appendChild(s);
};

function checkIfSuccess() {
  // vReturnDB is a Hash that is defined in the server call of the remote script
  // if vReturnDB is defined then DB submit was successful other not
  if (vReturnDB) {
    alert("successful");
  } else {
    alert("not successful");
  };
};

var vQueryHash = readQueryParams();
if (vQueryHash) {
  if (vQueryHash["calljson"]) {
    console.log("Navigate to Call JSON URL: "+vQueryHash["calljson"]);
    submitJSON(vQueryHash["callbackurl"]);
  } else {
    console.log("Call JSON URL undefined");
  };
} else {
  console.log("QueryHash in submitjson.html not defined");
};
setTimeout("checkIfSuccess()",5000);
</script>
</BODY>
</HTML>
